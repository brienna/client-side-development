
<head>
    <style> 
        body {
            background-color: lightgray;
        }
    </style>
</head>

<body>
    <form>
    </form>


    <script>
        var optionTexts = {
            1: {
                "Choose gender": null, 
                "M": 
                    {"Facial hair?": null,
                    "H": 
                        {"Complexion?": null,
                        "D": null, 
                        "L": null}, 
                    "NH": 
                        {"Build?": null,
                        "B": null, 
                        "S": null}
                    },
                "W": 
                    {"Blonde/Brunette?": null, 
                    "Blonde": 
                        {"Height?": null,
                            "T": null, 
                            "S": null},
                    "Brunette":
                        {"Eyes?": null,
                        "Br": null, 
                        "Bl": null}
                    }
            }
        };

        var form = document.getElementsByTagName('form')[0];
        var currentNode;
        var currentNum; // keeps track of <select> elements
        window.onload = function() {
            // Set optionTexts node 'pointer' to first node
            currentNum = 1;
            currentNode = optionTexts[1]; 
            createDropMenu(Object.keys(currentNode), currentNum);
        };

        // Creates all of the dropdowns
        function createDropMenu(texts, num) {
            console.log("creating select #" + num + "with " + texts);
            var select = document.createElement("select");
            select.name = num;
            select.onchange = function() { getNext(this) };
            
            // For each text,
            for (var i = 0; i < texts.length; i++) {
                // Create <option> 
                var option = document.createElement("option");
                // Create text node for <option> 
                var optionText = document.createTextNode(texts[i]);
                // Assign same text to value attr of <option> 
                option.value = texts[i];
                // Append text node to <option> 
                option.appendChild(optionText);
                // Append <option> to <select> 
                select.appendChild(option);
            }
            
            form.appendChild(select);
        }

        // Search for next options based on the option selected
        function getNext(select) {
            console.log("selected " + select.name);
            navigate(optionTexts[1]);

            function navigate(node) {
                if (node == null) {
                    return;
                } 

                for (var key in node) {
                    if (node[key] != null && key == select.value) {
                        // Clear any <select>s after current <select>
                        selects = form.getElementsByTagName('select');
                        for (var i = 0; i < selects.length; i++) {
                            console.log(selects[i]);
                            if (selects[i].name > select.name) {
                                form.removeChild(selects[i]);
                            }
                        }

                        currentNode = node[key];
                        currentNum = Number(select.name) + 1;
                        createDropMenu(Object.keys(currentNode), currentNum);
                        return;
                    } else {
                        navigate(node[key]);
                    }
                }
            }
        }

        
    </script>
</body>



